{% extends 'base_site.html' %}
{% load static %}
{% block title %}Vagas Ofertadas{% endblock %}
{% block css %}
{{block.super}}
{% endblock%}
{% block main_conteudo %}
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
<div class="col">
    <!-- <h2 class="text-start">VAGAS DISPONÍVEIS</h2> -->
    <div class="row">
      <div class="col d-flex">
        <h2 class="text-start">VAGAS OFERTADAS</h2>
        {% if request.user.is_staff %}
        <span class="ms-auto">
          <a class="btn btn-btfl me-2 px-3" href="{% url 'vagas:imprimir' %}"><i class="fas fa-print"></i></a>
          <a class="btn btn-btfl" href="{% url 'vagas:cadastrar' %}">CADASTRAR</a>
        </span>
        {% endif %}
      </div>
    </div>
    <div class="row mt-4">
      <div class="col d-flex">
        <style>
          #buscador {
            background-image: url('/static/images/search.png');
            background-position: 10px 8px;
            background-repeat: no-repeat;            
            font-size: 16px;
            padding: 12px 0px 12px 50px;
            border: 1px solid #ddd;
            margin-bottom: 12px;
          }
        </style>
        <input type="text" id="buscador" class=" ms-auto" placeholder="Procurar...">
      </div>
    </div>
    <table class="table table-hover">
      <thead>
          <tr> 
              {% if user.is_authenticated %}
              <th></th>
              {% endif %}
              <th scope="col">Vagas</th>
              <th scope="col">Cargo</th>
              <!-- <th scope="col">Empresa</th>
              <th scope="col">Vagas</th> -->
              <th scope="col">Experiência</th>
              <th scope="col">Escolaridade</th>      
              {% if user.is_authenticated %}
              <th>Empresa</th>                      
              {% endif %}
            </tr>
          </thead>
          <tbody id="busca">
          {% for vaga in vagas %}        
          <tr onpointerover="showEditIcon(editIcon_1532{{vaga.id}}d1sa56)" onpointerout="hiddenEditIcon(editIcon_1532{{vaga.id}}d1sa56)" style="background-color: rgba(230, 230, 230, 0.274);{% if user.is_authenticated %}cursor: pointer;{% endif %}" {% if user.is_authenticated %}onclick="(window.location.href='{% url 'vagas:visualizar_vaga' vaga.id %}')"{% endif %}>
            {% if user.is_authenticated %}
              <td style="vertical-align: middle;"><img id="editIcon_1532{{vaga.id}}d1sa56" style="height: 18px;" src="{% static 'images/edit-icon.png' %}" alt=""></td>     
              {% endif %}
              <td scope="row">{{vaga.quantidadeVagas}}</td>
              <td>{{vaga.cargo}}</td>            
              <!-- <td>{{vaga.empresa}}</td>
              <td>{{vaga.quantidadeVagas}}</td> -->
              <td>{{vaga.experiencia}}</td>      
              <td>{{vaga.escolaridade}}</td>                     
              {% if user.is_authenticated %}
              <td>{{vaga.empresa.nome}}</td>
              {% endif %}
            </tr>
          {% endfor %}
      </tbody>
    </table>
    <style>
      td img{
        visibility: hidden;
      }
      table{
        font-size:  0.9em;
      }
    </style>
    <script>
      function showEditIcon(id){
        id.style.visibility='visible'              
      }
      function hiddenEditIcon(id){
        id.style.visibility='hidden'              
      }
      $(document).ready(function(){
        $("#buscador").on("keyup", function() {
          var value = $(this).val().toLowerCase();
          $("#busca tr").filter(function() {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
          });
        });
      });
    </script>
</div>
{% endblock %}